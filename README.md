# utalog - カラオケ採点分析アプリ

DAM★ともの採点履歴を自動で取得し、分析・可視化するためのアプリケーションです。

## ✨ 主な機能

- DAM★ともAPIから採点履歴を自動取得
- 曲ごとの最高点や歌唱回数を一覧表示
- 曲ごとのスコア推移をグラフで可視化
- 全データのCSVエクスポート機能

## 🔧 必要な環境

- Node.js (v18.x.x 以上を推奨)
- npm

## 🚀 セットアップ手順

1.  **リポジトリをクローン**
    ```bash
    git clone https://github.com/あなたのユーザー名/utalog.git
    cd utalog
    ```

2.  **依存関係をインストール**
    ```bash
    npm install
    ```

3.  **環境変数を設定**
    `.env.example` をコピーして `.env` ファイルを作成し、ご自身のDAM★とも会員番号 (`cdmCardNo`) を設定してください。
    ```bash
    cp .env.example .env
    ```
    その後、`.env` ファイルを開いて `DAM_CDM_CARD_NO` の値を編集します。

4.  **データベースをセットアップ**
    以下のコマンドを実行して、データベースファイルとテーブルを作成します。
    ```bash
    npm run prisma:migrate
    ```

## 🏃‍♂️ 実行方法

1.  **データ取得**
    DAM★ともから最新の採点データを取得し、データベースに保存します。
    ```bash
    npm run scrape
    ```

2.  **アプリケーションの起動**
    ```bash
    npm run dev
    ```
    ブラウザで `http://localhost:3000` を開いてください。

    **docker composeでも実行することができます**
     ```bash
    docker compose up -d  
    ```
---

## 🛠️ データベースの確認方法 (Prisma Studio)

保存されたデータの中身を直接確認・編集したい場合は、Prisma Studio を使用します。

1.  ターミナルで以下のコマンドを実行します。
    ```bash
    npx prisma studio
    ```
2.  自動的にブラウザが立ち上がり、`http://localhost:5555` が開きます。
3.  表示された管理画面で `SongHistory` モデルをクリックすると、保存されている全データを確認できます。

---

## ⚠️ 注意事項

- 本プログラムは非公式なものであり、自己責任でご利用ください。
- アカウントの停止など、いかなる問題が発生しても責任は負いかねます。